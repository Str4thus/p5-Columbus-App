import { OpCode } from '../data-models/Enums';

export class TestSocket {
    onmessage;
    onerror;
    onopen;
    onclose;

    isConnected = false;

    imgs = ["data:image/png;base64,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",
        "data:image/png;base64,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TUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS4xLjIiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOlJlc29sdXRpb25Vbml0PjE8L3RpZmY6UmVzb2x1dGlvblVuaXQ+CiAgICAgICAgIDx0aWZmOkNvbXByZXNzaW9uPjU8L3RpZmY6Q29tcHJlc3Npb24+CiAgICAgICAgIDx0aWZmOlhSZXNvbHV0aW9uPjcyPC90aWZmOlhSZXNvbHV0aW9uPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICAgICA8dGlmZjpZUmVzb2x1dGlvbj43MjwvdGlmZjpZUmVzb2x1dGlvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIj4KICAgICAgICAgPGV4aWY6UGl4ZWxYRGltZW5zaW9uPjY0PC9leGlmOlBpeGVsWERpbWVuc2lvbj4KICAgICAgICAgPGV4aWY6Q29sb3JTcGFjZT4xPC9leGlmOkNvbG9yU3BhY2U+CiAgICAgICAgIDxleGlmOlBpeGVsWURpbWVuc2lvbj42NDwvZXhpZjpQaXhlbFlEaW1lbnNpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iPgogICAgICAgICA8ZGM6c3ViamVjdD4KICAgICAgICAgICAgPHJkZjpCYWcvPgogICAgICAgICA8L2RjOnN1YmplY3Q+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iPgogICAgICAgICA8eG1wOk1vZGlmeURhdGU+MjAxMy0wMy0yOVQxNjowMzoxMjwveG1wOk1vZGlmeURhdGU+CiAgICAgICAgIDx4bXA6Q3JlYXRvclRvb2w+UGl4ZWxtYXRvciAyLjEuNDwveG1wOkNyZWF0b3JUb29sPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KpCfligAAAwVJREFUeAHtm0+O1TAMh1s0azgBmhn2cAS4CMfjInAE2DMz4gSwHulRPeWzFLfG+SsE9Wz84sRu6t+XvCqvs14ul2Xm37quXRfY5rfOnN+Lmcn/hdzrKAJ6la4t1igygoBWAkoVf/54WytuNv7m01PWthqtRAQBtQRYyptKFypoKbsYBFlk1JIQBJQS4CpvKH1jSlvW8WwNS2T0khAEeASUKm8p7eW3BMa/XZ+PmRUyOkkIAiyFapW38mSyNTQev325Rt29fZ9FQ0YvCUGAVm648r8eMuVKG49PPw6V1/G9JAQBENCtfKPSWlFR/va17srbL++zdisJQYBFgDzbpyc8vucZL+XvVB7FyXfnKc9AbCMJ231cHzCCgK2Q2ZndbOW7FUd5bRtJOD0BLG1dz3170FrXaxwitH8/AceT5kc+Z7R0BwFSCucDle1WSl2HfLPyq8vtmkHAriSTHJbSf0t5bjMIoBKzraU0ZMy+vpU/CLAq0+pHaR1fq/SoPHoeuh0E6Iq0tlHs/t2HwxQPXz9f/R4Jo/IcTuLAGQQcFKXK5SlGMsi4/PyO69Ay7rBzc9JfSpSVB38QQCVaLYq0xrfGcV2PKC//6QmIAniI/O/98paY/l3AOhvc7b7pLI5zea9grFm+PRjP88H66g2uP1o5nVYnQewN3m+GcSqcyisEUO5ZJGjFtNKQsThE6TyQVKs893v6TXBHAJXpJYE8YtWpskkAAeqcH/fSueYlT/oQBMia0qVJ7VISCJe1jMOyWmFFiBWmySnd7a18QYBHAJXzSGAcPzUVk0CgY1FeFGe88ZbYdl/Hr5cRl2wQUEoAhfNI8AhASU2I5ZfrpidEIaBTefKengAEoyDDLE9oVkKr3/JbeXr9pyfAfBL0Klu6F+g8rGGNnuUnnn7+f0C/JV6665MPGwTUfgtQOaxHAuPEpt170f9fYPkJHLTrkw4bBPQSQCVNEhiQLGtXTpwcP+HE0W5d88Rjg4BRBFBRTQL+UXaU8swnCBhNAJUdTcJo5Znn6Qn4DdXUs/TSllinAAAAAElFTkSuQmCC"
    ]
    index = 0;

    connectCamera() {
        this._sendMessage({ "op": OpCode.STATE_UPDATE, "d": { "cam": true } });
    }

    disconnectCamera() {
        this._sendMessage({ "op": OpCode.STATE_UPDATE, "d": { "cam": false } });
    }

    updateCameraImage() {
        this._sendMessage({ "op": OpCode.DISPATCH, "d": { "affected_module": "cam", "updates": { "img": this.imgs[this.index++] } } });
        this.index %= 2;
    }

    turnCameraHorizontally(deg) {
        this._sendMessage({ "op": OpCode.DISPATCH, "d": { "affected_module": "cam", "updates": { "hrot": deg } } });
    }

    turnCameraVertically(deg) {
        this._sendMessage({ "op": OpCode.DISPATCH, "d": { "affected_module": "cam", "updates": { "vrot": deg } } });
    }

    send(msg) {
        console.log("TestSocket: send");
        console.log(msg);
    }

    open() {
        this.onopen();
        this.isConnected = true;
    }

    close() {
        this.onclose();
        this.isConnected = false;
    }

    _sendMessage(data) {
        if (!this.isConnected)
            return;

        let event = new MessageEvent("testMessage", { "data": JSON.stringify(data) });
        this.onmessage(event);
    }
}